<section id="screen-info" class="screen">
  <img src="../assets/Matrix.png" alt="Matrix TSL" class="logo matrix-logo" />
  <button id="btnHome" class="home-button">üè†</button>
  <div class="panel">
    <h2>System Info</h2>
    <div class="info-description">
      <p>Detailed information about your device and browser</p>
    </div>
    
    <div class="info-grid">
      <div class="info-section">
        <h3>Device Information</h3>
        <div class="info-item">
          <span class="info-label">Platform:</span>
          <span class="info-value" id="platform">Detecting...</span>
        </div>
        <div class="info-item">
          <span class="info-label">User Agent:</span>
          <span class="info-value" id="userAgent">Detecting...</span>
        </div>
        <div class="info-item">
          <span class="info-label">Language:</span>
          <span class="info-value" id="language">Detecting...</span>
        </div>
        <div class="info-item">
          <span class="info-label">Cookies Enabled:</span>
          <span class="info-value" id="cookiesEnabled">Detecting...</span>
        </div>
      </div>
      
      <div class="info-section">
        <h3>Screen & Display</h3>
        <div class="info-item">
          <span class="info-label">Screen Size:</span>
          <span class="info-value" id="screenSize">Detecting...</span>
        </div>
        <div class="info-item">
          <span class="info-label">Viewport:</span>
          <span class="info-value" id="viewport">Detecting...</span>
        </div>
        <div class="info-item">
          <span class="info-label">Pixel Ratio:</span>
          <span class="info-value" id="pixelRatio">Detecting...</span>
        </div>
        <div class="info-item">
          <span class="info-label">Color Depth:</span>
          <span class="info-value" id="colorDepth">Detecting...</span>
        </div>
      </div>
      
      <div class="info-section">
        <h3>Browser Capabilities</h3>
        <div class="info-item">
          <span class="info-label">Local Storage:</span>
          <span class="info-value" id="localStorage">Detecting...</span>
        </div>
        <div class="info-item">
          <span class="info-label">Session Storage:</span>
          <span class="info-value" id="sessionStorage">Detecting...</span>
        </div>
        <div class="info-item">
          <span class="info-label">Web Workers:</span>
          <span class="info-value" id="webWorkers">Detecting...</span>
        </div>
        <div class="info-item">
          <span class="info-label">Service Workers:</span>
          <span class="info-value" id="serviceWorkers">Detecting...</span>
        </div>
      </div>
      
      <div class="info-section">
        <h3>Performance</h3>
        <div class="info-item">
          <span class="info-label">Connection:</span>
          <span class="info-value" id="connection">Detecting...</span>
        </div>
        <div class="info-item">
          <span class="info-label">Memory:</span>
          <span class="info-value" id="memory">Detecting...</span>
        </div>
        <div class="info-item">
          <span class="info-label">Battery:</span>
          <span class="info-value" id="battery">Detecting...</span>
        </div>
        <div class="info-item">
          <span class="info-label">Hardware Concurrency:</span>
          <span class="info-value" id="hardwareConcurrency">Detecting...</span>
        </div>
      </div>
    </div>
    
    <div class="real-time-info">
      <h3>Real-time Updates</h3>
      <div class="real-time-grid">
        <div class="real-time-item">
          <span class="real-time-label">Current Time:</span>
          <span class="real-time-value" id="currentTime">--:--:--</span>
        </div>
        <div class="real-time-item">
          <span class="real-time-label">Page Load Time:</span>
          <span class="real-time-value" id="pageLoadTime">--</span>
        </div>
        <div class="real-time-item">
          <span class="real-time-label">Memory Usage:</span>
          <span class="real-time-value" id="memoryUsage">--</span>
        </div>
        <div class="real-time-item">
          <span class="real-time-label">FPS:</span>
          <span class="real-time-value" id="fps">--</span>
        </div>
      </div>
    </div>
    
    <div class="toolbar center">
      <button id="btnInfoRefresh" class="chip">Refresh Info</button>
    </div>
  </div>
</section>

<style>
  /* Info App Specific Styles - All scoped to #screen-info */
  #screen-info {
    /* Dark, modern, high-contrast theme variables (scoped) */
    --bg-0: #0b1220;
    --bg-1: #0f1a2b;
    --panel: rgba(10, 18, 33, 0.7);
    --panel-soft: rgba(255, 255, 255, 0.04);
    --text: #e6f1ff;
    --muted: #9fb3c8;
    --divider: rgba(230, 241, 255, 0.10);
    --accent: #00e5ff;   /* cyan */
    --accent-2: #ff3d00; /* orange */
    --accent-3: #39ff14; /* lime */
    --chip-bg: rgba(0, 229, 255, 0.10);
    --chip-br: rgba(0, 229, 255, 0.45);

    display: flex;
    flex-direction: column;
    height: 100%;
    background:
      radial-gradient(800px 500px at 20% 0%, rgba(0, 229, 255, 0.08), transparent 60%),
      radial-gradient(800px 500px at 80% 100%, rgba(57, 255, 20, 0.08), transparent 60%),
      linear-gradient(180deg, var(--bg-0), var(--bg-1));
    color: var(--text);
    font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
    padding: 20px;
    overflow-y: auto;
    overflow-x: hidden; /* prevent horizontal page scroll */
    position: relative;
    -webkit-font-smoothing: antialiased;
    scrollbar-color: var(--accent) transparent; /* Firefox scoped scrollbar */
  }

  #screen-info * { box-sizing: border-box; }
  
  /* Home button styles */
  #screen-info .home-button {
    position: absolute;
    top: 15px;
    right: 15px;
    padding: 10px 15px;
    background: rgba(255,255,255,0.08);
    border: 1px solid var(--divider);
    border-radius: 12px;
    color: var(--text);
    font-size: 18px;
    cursor: pointer;
    transition: all 0.3s ease;
    z-index: 100;
    width: 40px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 0 0 1px rgba(0,229,255,0.25), 0 6px 20px rgba(0, 229, 255, 0.12);
  }
  
  #screen-info .home-button:hover {
    background: rgba(0,229,255,0.15);
    transform: translateY(-2px);
    box-shadow: 0 0 0 1px rgba(0,229,255,0.45), 0 10px 28px rgba(0, 229, 255, 0.18);
  }
  
  /* Matrix logo styles */
  #screen-info .matrix-logo {
    position: absolute;
    top: 15px;
    left: 15px;
    height: 40px;
    width: auto;
    z-index: 100;
    animation: pulse 2s infinite;
  }
  
  @keyframes pulse {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.7; }
  }
  
  #screen-info .panel {
    flex: 1;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 20px;
    width: 100%;
    max-width: 1280px;
    margin: 0 auto;
  }
  
  #screen-info h2 {
    font-size: 2.2em;
    margin: 0;
    text-align: center;
    letter-spacing: 0.02em;
    text-shadow: 0 0 16px rgba(0, 229, 255, 0.18);
  }
  
  #screen-info .info-description {
    text-align: center;
    background: var(--panel-soft);
    padding: 14px 20px;
    border-radius: 12px;
    border: 1px solid var(--divider);
  }
  
  #screen-info .info-description p {
    margin: 0;
    font-size: 14px;
    color: var(--muted);
  }
  
  #screen-info .info-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
    gap: 20px;
    width: 100%;
    max-width: 1200px;
  }
  
  #screen-info .info-section {
    background: var(--panel);
    border: 1px solid var(--divider);
    border-radius: 12px;
    padding: 18px;
    backdrop-filter: blur(8px);
    box-shadow: 0 20px 40px rgba(0, 0, 0, 0.35), inset 0 0 0 1px rgba(230, 241, 255, 0.02);
  }
  
  #screen-info .info-section h3 {
    margin: 0 0 12px 0;
    font-size: 1.05em;
    color: var(--accent);
    text-align: center;
    border-bottom: 1px solid var(--divider);
    padding-bottom: 8px;
    letter-spacing: 0.06em;
    text-transform: uppercase;
  }
  
  #screen-info .info-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 10px;
    padding: 8px 0;
    border-bottom: 1px dashed var(--divider);
    gap: 10px;
  }
  
  #screen-info .info-item:last-child {
    border-bottom: none;
    margin-bottom: 0;
  }
  
  #screen-info .info-label {
    font-weight: 600;
    color: var(--muted);
    font-size: 13px;
  }
  
  #screen-info .info-value {
    background: var(--chip-bg);
    padding: 6px 10px;
    border-radius: 10px;
    border: 1px solid var(--chip-br);
    font-family: 'Courier New', monospace;
    font-size: 12px;
    max-width: 240px;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    color: var(--text);
    box-shadow: inset 0 0 0 1px rgba(0,229,255,0.15);
  }
  
  #screen-info .real-time-info {
    background: var(--panel);
    border: 1px solid var(--divider);
    border-radius: 12px;
    padding: 18px;
    width: 100%;
    max-width: 800px;
    backdrop-filter: blur(8px);
    box-shadow: 0 20px 40px rgba(0, 0, 0, 0.35), inset 0 0 0 1px rgba(230, 241, 255, 0.02);
  }
  
  #screen-info .real-time-info h3 {
    margin: 0 0 12px 0;
    font-size: 1.05em;
    color: var(--accent-3);
    text-align: center;
    border-bottom: 1px solid var(--divider);
    padding-bottom: 8px;
    letter-spacing: 0.06em;
    text-transform: uppercase;
  }
  
  #screen-info .real-time-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
    gap: 14px;
  }
  
  #screen-info .real-time-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
    background: rgba(255,255,255,0.03);
    padding: 14px;
    border-radius: 10px;
    border: 1px solid var(--divider);
  }
  
  #screen-info .real-time-label {
    font-size: 13px;
    color: var(--muted);
    margin-bottom: 6px;
  }
  
  #screen-info .real-time-value {
    font-size: 18px;
    font-weight: 700;
    color: var(--accent-3);
    font-family: 'Courier New', monospace;
    text-shadow: 0 0 12px rgba(57,255,20,0.16);
  }
  
  #screen-info .toolbar {
    display: flex;
    gap: 12px;
    margin: 10px 0 0 0;
    flex-wrap: wrap;
    justify-content: center;
  }
  
  #screen-info .chip {
    padding: 12px 22px;
    border: 1px solid var(--chip-br);
    border-radius: 12px;
    background: var(--chip-bg);
    color: var(--text);
    font-size: 15px;
    cursor: pointer;
    transition: all 0.2s ease;
    font-family: inherit;
    box-shadow: 0 0 0 1px rgba(0,229,255,0.18), 0 8px 24px rgba(0, 229, 255, 0.14);
  }
  
  #screen-info .chip:hover {
    background: rgba(0,229,255,0.18);
    border-color: rgba(0,229,255,0.6);
    transform: translateY(-2px);
    box-shadow: 0 0 0 1px rgba(0,229,255,0.4), 0 12px 32px rgba(0, 229, 255, 0.18);
  }

  /* Scoped custom scrollbars */
  #screen-info::-webkit-scrollbar { width: 10px; height: 10px; }
  #screen-info::-webkit-scrollbar-thumb {
    background: linear-gradient(180deg, var(--accent), var(--accent-2));
    border-radius: 10px;
  }
  #screen-info::-webkit-scrollbar-track { background: transparent; }
  
  /* Responsive design */
  @media (max-width: 1024px) {
    #screen-info .panel { padding-top: 12px; }
  }

  @media (max-width: 768px) {
    #screen-info h2 { font-size: 1.8em; }
    #screen-info .info-grid {
      grid-template-columns: 1fr;
      gap: 16px;
    }
    #screen-info .info-section { padding: 14px; }
    #screen-info .info-item {
      flex-direction: column;
      align-items: flex-start;
      gap: 6px;
    }
    #screen-info .info-value {
      max-width: 100%;
      text-align: left;
    }
    #screen-info .real-time-grid {
      grid-template-columns: repeat(2, 1fr);
      gap: 12px;
    }
    #screen-info .chip { padding: 10px 18px; font-size: 14px; }
  }

  @media (max-width: 480px) {
    #screen-info h2 { font-size: 1.6em; }
    #screen-info .matrix-logo { height: 32px; }
    #screen-info .info-value {
      white-space: normal;         /* allow wrapping on very small screens */
      word-break: break-word;
    }
    #screen-info .real-time-grid { grid-template-columns: 1fr; }
  }
</style>

<script>
  (function() {
    'use strict';
    
    // App state
    let updateTimer = null;
    let fpsCounter = 0;
    let lastFpsTime = 0;
    let pageLoadStart = performance.now();
    
    // DOM elements
    let elements = {};
    
    function initApp() {
      console.log('System Info app initialized');
      setupDOM();
      setupEventListeners();
      collectSystemInfo();
      startRealTimeUpdates();
    }
    
    function setupDOM() {
      // Device Information
      elements.platform = document.querySelector('#platform');
      elements.userAgent = document.querySelector('#userAgent');
      elements.language = document.querySelector('#language');
      elements.cookiesEnabled = document.querySelector('#cookiesEnabled');
      
      // Screen & Display
      elements.screenSize = document.querySelector('#screenSize');
      elements.viewport = document.querySelector('#viewport');
      elements.pixelRatio = document.querySelector('#pixelRatio');
      elements.colorDepth = document.querySelector('#colorDepth');
      
      // Browser Capabilities
      elements.localStorage = document.querySelector('#localStorage');
      elements.sessionStorage = document.querySelector('#sessionStorage');
      elements.webWorkers = document.querySelector('#webWorkers');
      elements.serviceWorkers = document.querySelector('#serviceWorkers');
      
      // Performance
      elements.connection = document.querySelector('#connection');
      elements.memory = document.querySelector('#memory');
      elements.battery = document.querySelector('#battery');
      elements.hardwareConcurrency = document.querySelector('#hardwareConcurrency');
      
      // Real-time
      elements.currentTime = document.querySelector('#currentTime');
      elements.pageLoadTime = document.querySelector('#pageLoadTime');
      elements.memoryUsage = document.querySelector('#memoryUsage');
      elements.fps = document.querySelector('#fps');
    }
    
    function setupEventListeners() {
      const container = document.querySelector('#screen-info');
      
      container.addEventListener('click', function(e) {
        if (e.target.id === 'btnInfoRefresh') {
          collectSystemInfo();
        } else if (e.target.id === 'btnHome') {
          goHome();
        }
      });
    }
    
    function collectSystemInfo() {
      // Device Information
      elements.platform.textContent = navigator.platform || 'Unknown';
      elements.userAgent.textContent = navigator.userAgent.substring(0, 50) + '...';
      elements.language.textContent = navigator.language || 'Unknown';
      elements.cookiesEnabled.textContent = navigator.cookieEnabled ? 'Yes' : 'No';
      
      // Screen & Display
      elements.screenSize.textContent = `${screen.width} √ó ${screen.height}`;
      elements.viewport.textContent = `${window.innerWidth} √ó ${window.innerHeight}`;
      elements.pixelRatio.textContent = window.devicePixelRatio || '1';
      elements.colorDepth.textContent = `${screen.colorDepth} bit`;
      
      // Browser Capabilities
      elements.localStorage.textContent = testLocalStorage() ? 'Yes' : 'No';
      elements.sessionStorage.textContent = testSessionStorage() ? 'Yes' : 'No';
      elements.webWorkers.textContent = typeof Worker !== 'undefined' ? 'Yes' : 'No';
      elements.serviceWorkers.textContent = 'serviceWorker' in navigator ? 'Yes' : 'No';
      
      // Performance
      elements.connection.textContent = getConnectionInfo();
      elements.memory.textContent = getMemoryInfo();
      elements.battery.textContent = 'Checking...';
      elements.hardwareConcurrency.textContent = navigator.hardwareConcurrency || 'Unknown';
      
      // Check battery if available
      checkBattery();
      
      // Check connection if available
      checkConnection();
    }
    
    function testLocalStorage() {
      try {
        const test = 'test';
        localStorage.setItem(test, test);
        localStorage.removeItem(test);
        return true;
      } catch (e) {
        return false;
      }
    }
    
    function testSessionStorage() {
      try {
        const test = 'test';
        sessionStorage.setItem(test, test);
        sessionStorage.removeItem(test);
        return true;
      } catch (e) {
        return false;
      }
    }
    
    function getConnectionInfo() {
      if ('connection' in navigator) {
        const conn = navigator.connection;
        return `${conn.effectiveType || 'Unknown'} (${conn.downlink || 'Unknown'} Mbps)`;
      }
      return 'Not available';
    }
    
    function getMemoryInfo() {
      if ('memory' in performance) {
        const mem = performance.memory;
        const used = Math.round(mem.usedJSHeapSize / 1048576);
        const total = Math.round(mem.totalJSHeapSize / 1048576);
        return `${used}MB / ${total}MB`;
      }
      return 'Not available';
    }
    
    function checkBattery() {
      if ('getBattery' in navigator) {
        navigator.getBattery().then(battery => {
          const level = Math.round(battery.level * 100);
          const charging = battery.charging ? ' (Charging)' : '';
          elements.battery.textContent = `${level}%${charging}`;
        }).catch(() => {
          elements.battery.textContent = 'Not available';
        });
      } else {
        elements.battery.textContent = 'Not available';
      }
    }
    
    function checkConnection() {
      if ('connection' in navigator) {
        navigator.connection.addEventListener('change', () => {
          elements.connection.textContent = getConnectionInfo();
        });
      }
    }
    
    function startRealTimeUpdates() {
      updateTimer = setInterval(updateRealTimeInfo, 1000);
      
      // FPS counter
      let lastTime = performance.now();
      function countFPS() {
        const currentTime = performance.now();
        fpsCounter++;
        
        if (currentTime - lastTime >= 1000) {
          const fps = Math.round((fpsCounter * 1000) / (currentTime - lastTime));
          elements.fps.textContent = `${fps} FPS`;
          fpsCounter = 0;
          lastTime = currentTime;
        }
        
        requestAnimationFrame(countFPS);
      }
      countFPS();
    }
    
    function updateRealTimeInfo() {
      // Current time
      const now = new Date();
      elements.currentTime.textContent = now.toLocaleTimeString();
      
      // Page load time
      const loadTime = Math.round(performance.now() - pageLoadStart);
      elements.pageLoadTime.textContent = `${loadTime}ms`;
      
      // Memory usage
      if ('memory' in performance) {
        const mem = performance.memory;
        const used = Math.round(mem.usedJSHeapSize / 1048576);
        elements.memoryUsage.textContent = `${used}MB`;
      }
    }
    
    function goHome() {
      // Direct navigation back to home
      window.location.href = '../index.html';
    }
    
    // Lifecycle management
    window.appLifecycle = {
      activate: function() {
        console.log('System Info app activated');
        // Resume real-time updates
        if (!updateTimer) {
          startRealTimeUpdates();
        }
      },
      
      deactivate: function() {
        console.log('System Info app deactivated');
        // Pause real-time updates when switching away
        if (updateTimer) {
          clearInterval(updateTimer);
          updateTimer = null;
        }
      },
      
      cleanup: function() {
        console.log('System Info app cleanup');
        // Stop real-time updates
        if (updateTimer) {
          clearInterval(updateTimer);
          updateTimer = null;
        }
      }
    };
    
    // Initialize app
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', initApp);
    } else {
      initApp();
    }
  })();
</script>
